<include file="Public/head"/>
    <header>
        <section id="top_bar" style="text-align:center;height:47px;padding:5px 0px 0px 10px;">
            <ul style="padding-top:5px;">
                <li style="width:20%;text-align:left;"><img onclick="javascript:history.back();" style="width:30px;height:30px;" src="__IMG__/goback.jpg"></li>
                <li style="width:56%;vertical-align:30%;"><span class="header_title_text">注&nbsp;&nbsp;&nbsp;&nbsp;册</span></li>
                <li style="width:20%;">
                    <ul>
                        <li style="float:right;position:relative;top:0px;right:15px;"><img src="__IMG__/account.jpg" class="header_button" onclick='doHREF("{:logistics_url(2,'login')}")'><span style="position:relative;top:20px;left:5px;" class="white_12_label" onclick='doHREF("{:logistics_url(2,'login')}")';">登录</span></li>
                    </ul>
                </li>
            </ul>
        </section>
    </header>
    <content>
        <section style="text-align:center;padding:0px 10px 0px 10px;">
            <img width="100%" src="__IMG__/ad_1.jpg" />
            <img width="100%" src="__IMG__/ad_2.jpg" />
            <img width="100%" src="__IMG__/ad_3.jpg" />
            <img width="100%" src="__IMG__/ad_4.jpg" />
            <img width="100%" src="__IMG__/ad_5.jpg" />
            <img width="100%" src="__IMG__/ad_6.jpg" />
        </section>
        <section style="text-align:center;padding:0px 10px 0px 10px;">
            <form id="submit_form" action="" method="post">
                <ul style="list-style:none;padding:0px;margin:0px 0px 10px 0px;text-align:left;">
                    <li>
                        <input id="nickname" class="input_field" type="text" name="username" value="" placeholder="请输入公司名(登录帐号)，由3-30个字符组成">
                    </li>
                    <li>
                        <input id="password" class="input_field" type="password" name="password" value="" placeholder="请输入密码（不低于6位的字母和数字）">
                    </li>
                    <li>
                        <input id="repassword" class="input_field" type="password" name="repassword" value="" placeholder="请确认密码（不低于6位的字母和数字）">
                    </li>
                    <li>
                        <input id="contact" class="input_field" type="text" name="contact" value="" placeholder="请输入联系人">
                    </li>
                    <li>
                        <input id="telephone" class="input_field" type="text" name="telephone" value="" placeholder="请输入手机号">
                    </li>
                    <li>
                        <input id="wechat" class="input_field" type="text" name="wechat" value="" placeholder="请输入微信号">
                    </li>
                    <li class="input_field" style="line-height: 40px;padding-left: 10px;font-size: 14px;">
                        用户类型
                        <input type="radio" name="group" value="2" checked> 物流
                        <input type="radio" name="group" value="3" > 厂家
                    </li>
                    <li>
                        <input id="verify" class="input_field" style="width:50%;" type="text" name="verify" placeholder="看不清？点击图片刷新" value="">
                        <span class="captcha_box" style="display:inline-block;height:32px;position:relative; top:12px;"><img src="{:logistics_url(2,'verify')}" width="100" height="32" style="border: 0px; cursor: pointer;" alt=" " id="refresh_captcha" title="看不清？点击刷新"></span>
                    </li>
                    <li style="margin-top:15px;">
                        <div class="plain_button_orange" id="signup-submit"><a>确&nbsp;&nbsp;&nbsp;定</a></div>
                    </li>
                </ul>
            </form>
            <a style="margin-bottom:10px;color:#377BA6;font-size:12px;text-decoration:underline;cursor:pointer;display:inline-block;" onclick='doHREF("{:logistics_url(2,'login')}")'>已经有帐号？请登录</a>
        </section>
    </content>
    <script type="text/javascript" src="__STATIC__/layer/layer.js"></script>
    <script>
        $(function(){
            $('#refresh_captcha').click(function(){
                var url = $(this).attr('src');
                if( url.indexOf('?')>0){
                    $(this).attr("src", url.replace(/\?.*$/,'')+'?'+Math.random());
                }else{
                    $(this).attr("src", url+'?'+Math.random());
                }
            });
            $('#signup-submit').click(function(){

                var nickname = $.trim($('#nickname').val());
                if(nickname.length == 0){
                    layer.msg('帐号不能为空');
                    return false;
                }else if(nickname.length < 3 || nickname.length > 30){
                    layer.msg('帐号长度不正确');
                    return false;
                }

                var password = $.trim($('#password').val());
                if(password.length == 0){
                    layer.msg('密码不能为空');
                    return false
                }

                var re_password = $.trim($('#repassword').val());
                if(password != re_password){
                    layer.msg('两次密码输入不一致');
                    return false
                }

                var contact = $.trim($('#contact').val());
                if(contact.length == 0){
                    layer.msg('联系人不能为空');
                    return false
                }else if(contact.length > 5){
                    layer.msg('联系人不能超过5个字符');
                    return false
                }
                var telephone = $.trim($('#telephone').val());
                var reg_telephone = /^1[3|4|5|7|8][0-9]\d{8}$/;

                if(telephone.length == 0){
                    layer.msg('手机号不能为空');
                    return false
                }else if(!reg_telephone.test(telephone)){
                    layer.msg('手机号格式不正确');
                    return false
                }

                var wechat = $.trim($('#wechat').val());
                if(wechat.length == 0){
                    layer.msg('微信号不能为空');
                    return false
                }

                var verify = $.trim($('#verify').val());
                if(verify.length == 0){
                    layer.msg('验证码不能为空');
                    return false;
                }
                var target = "{:logistics_url(2,'register')}";
                var query = $('#submit_form').serialize();

                $.post(target,query).success(function(data){
                    if (data.status==1){
                        layer.msg('恭喜您，注册成功！页面即将跳转~~');
                        setTimeout(function(){
                            window.location.href = data.url;
                        },1300)
                    }else{
                        layer.msg(data.info);
                        $('#refresh_captcha').click();
                    }
                });
                return false;
            });
        });
    </script>
<include file="Public/footer"/>